\hypertarget{class_movement_controller}{}\section{Movement\+Controller Class Reference}
\label{class_movement_controller}\index{Movement\+Controller@{Movement\+Controller}}


{\ttfamily \#include $<$Movement\+Controller.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_movement_controller_aed25a9c08f44c223108137bc932ddd35}\label{class_movement_controller_aed25a9c08f44c223108137bc932ddd35}} 
unsigned char {\bfseries init\+Robot} ()
\item 
\mbox{\Hypertarget{class_movement_controller_a2c60a9e0f4750a9ffa08196270795166}\label{class_movement_controller_a2c60a9e0f4750a9ffa08196270795166}} 
unsigned char {\bfseries move2\+Home\+Position} ()
\end{DoxyCompactItemize}
\begin{Indent}\textbf{ world\+Coordinates\+To\+Leg\+Coordinates}\par
{\em Converts world coordinates to the specific leg coordinate system. }\begin{DoxyCompactItemize}
\item 
unsigned char \mbox{\hyperlink{class_movement_controller_a0710b423644d46f7391e4b75c5879559}{get\+Leg\+Coordinates\+From\+World\+Coordinates}} (unsigned char leg\+Number, float pk\+Xold, float pk\+Yold, float pk\+Zold, float pwX, float pwY, float pwZ, float \&pkX, float \&pkY, float \&pkZ)
\item 
\mbox{\Hypertarget{class_movement_controller_a328939445cf5c8f7878e9fd44fde3c96}\label{class_movement_controller_a328939445cf5c8f7878e9fd44fde3c96}} 
unsigned char {\bfseries world\+Position\+To\+Leg\+One\+Position} (float pk\+Xold, float pk\+Yold, float pk\+Zold, float pwX, float pwY, float pwZ, float \&pkX, float \&pkY, float \&pkZ)
\item 
\mbox{\Hypertarget{class_movement_controller_a715ebda5d6d77f1763d0288268caf5ae}\label{class_movement_controller_a715ebda5d6d77f1763d0288268caf5ae}} 
unsigned char {\bfseries world\+Position\+To\+Leg\+Two\+Position} (float pk\+Xold, float pk\+Yold, float pk\+Zold, float pwX, float pwY, float pwZ, float \&pkX, float \&pkY, float \&pkZ)
\item 
\mbox{\Hypertarget{class_movement_controller_a1c4c708534a712257c7282638568e9ee}\label{class_movement_controller_a1c4c708534a712257c7282638568e9ee}} 
unsigned char {\bfseries world\+Position\+To\+Leg\+Three\+Position} (float pk\+Xold, float pk\+Yold, float pk\+Zold, float pwX, float pwY, float pwZ, float \&pkX, float \&pkY, float \&pkZ)
\item 
\mbox{\Hypertarget{class_movement_controller_a5ebb5b6f2242350310aede085140cffe}\label{class_movement_controller_a5ebb5b6f2242350310aede085140cffe}} 
unsigned char {\bfseries world\+Position\+To\+Leg\+Four\+Position} (float pk\+Xold, float pk\+Yold, float pk\+Zold, float pwX, float pwY, float pwZ, float \&pkX, float \&pkY, float \&pkZ)
\item 
\mbox{\Hypertarget{class_movement_controller_ad57ba364952a497b5772c67cc27ed797}\label{class_movement_controller_ad57ba364952a497b5772c67cc27ed797}} 
unsigned char {\bfseries world\+Position\+To\+Leg\+Five\+Position} (float pk\+Xold, float pk\+Yold, float pk\+Zold, float pwX, float pwY, float pwZ, float \&pkX, float \&pkY, float \&pkZ)
\item 
\mbox{\Hypertarget{class_movement_controller_ac8928ae991954ef78fc32c9faa0d0c54}\label{class_movement_controller_ac8928ae991954ef78fc32c9faa0d0c54}} 
unsigned char {\bfseries world\+Position\+To\+Leg\+Six\+Position} (float pk\+Xold, float pk\+Yold, float pk\+Zold, float pwX, float pwY, float pwZ, float \&pkX, float \&pkY, float \&pkZ)
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ get\+World\+Coordinates\+From\+FK}\par
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_movement_controller_a252a8052b283372152f3376ea0aee55b}\label{class_movement_controller_a252a8052b283372152f3376ea0aee55b}} 
unsigned char {\bfseries get\+World\+Coordinates\+From\+FK} (unsigned char leg\+Number, float q1, float q2, float q3, float \&px, float \&py, float \&pz)
\item 
\mbox{\Hypertarget{class_movement_controller_a3c86e9f08423c5662e2134736160d539}\label{class_movement_controller_a3c86e9f08423c5662e2134736160d539}} 
unsigned char {\bfseries leg\+One\+F\+K\+Calculation} (float q1, float q2, float q3, float \&px, float \&py, float \&pz)
\item 
\mbox{\Hypertarget{class_movement_controller_ad1349ca3157f098be97571752e55d734}\label{class_movement_controller_ad1349ca3157f098be97571752e55d734}} 
unsigned char {\bfseries leg\+Two\+F\+K\+Calculation} (float q1, float q2, float q3, float \&px, float \&py, float \&pz)
\item 
\mbox{\Hypertarget{class_movement_controller_a30eeaacb6e169c727c4892c65fd2580f}\label{class_movement_controller_a30eeaacb6e169c727c4892c65fd2580f}} 
unsigned char {\bfseries leg\+Three\+F\+K\+Calculation} (float q1, float q2, float q3, float \&px, float \&py, float \&pz)
\item 
\mbox{\Hypertarget{class_movement_controller_ab5811a162191979ea4815219fa9709e9}\label{class_movement_controller_ab5811a162191979ea4815219fa9709e9}} 
unsigned char {\bfseries leg\+Four\+F\+K\+Calculation} (float q1, float q2, float q3, float \&px, float \&py, float \&pz)
\item 
\mbox{\Hypertarget{class_movement_controller_aa1c69d5fe2c7e17ba23de283f85c38a2}\label{class_movement_controller_aa1c69d5fe2c7e17ba23de283f85c38a2}} 
unsigned char {\bfseries leg\+Five\+F\+K\+Calculation} (float q1, float q2, float q3, float \&px, float \&py, float \&pz)
\item 
\mbox{\Hypertarget{class_movement_controller_ab342cee1b0fec3faed3e98c23f50d941}\label{class_movement_controller_ab342cee1b0fec3faed3e98c23f50d941}} 
unsigned char {\bfseries leg\+Six\+F\+K\+Calculation} (float q1, float q2, float q3, float \&px, float \&py, float \&pz)
\item 
unsigned char \mbox{\hyperlink{class_movement_controller_a5765726eb4e820a7ac669c88fe4937e7}{get\+Angle\+With\+I\+K\+\_\+tan\+Formula}} (float px, float py, float pz, float \&q1, float \&q2, float \&q3)
\item 
unsigned char \mbox{\hyperlink{class_movement_controller_a53b401947106872656c4fb1e77b04bba}{interpolation\+Angle\+Endposition}} (float qend, float qhome, float(\&interpolated\+Angle\+Movement)\mbox{[}10\mbox{]}, float \&movement\+Speed)
\item 
\mbox{\Hypertarget{class_movement_controller_a12ad030f9459004052685722bc56acfb}\label{class_movement_controller_a12ad030f9459004052685722bc56acfb}} 
unsigned char {\bfseries interpolation\+Angle\+For\+Sync\+Lin\+Movement} (float deltaQ, float tb, float tv, float $\ast$interpolated\+Angle\+Movement, float $\ast$interpolated\+Velocity, int size)
\item 
\mbox{\Hypertarget{class_movement_controller_ae58ec5af97b9f1c65c375a779c77cd16}\label{class_movement_controller_ae58ec5af97b9f1c65c375a779c77cd16}} 
unsigned char {\bfseries move\+Leg\+One\+With\+Interpolated\+Position} (float q1old, float q2old, float q3old, float q1, float q2, float q3)
\item 
unsigned char \mbox{\hyperlink{class_movement_controller_a53d19d2516a2ed440c2b15fc47ea91b7}{get\+Angle\+With\+IK}} (float px, float py, float pz, float \&q1, float \&q2, float \&q3)
\item 
\mbox{\Hypertarget{class_movement_controller_a60394fc92c5874689cb4108f0d67a66a}\label{class_movement_controller_a60394fc92c5874689cb4108f0d67a66a}} 
unsigned char {\bfseries move\+Legs} (float pxold, float pyold, float pzold, float px, float py, float pz)
\item 
\mbox{\Hypertarget{class_movement_controller_a0d83341f49565d8ddf9f08e80ffed7a3}\label{class_movement_controller_a0d83341f49565d8ddf9f08e80ffed7a3}} 
unsigned char {\bfseries do\+One\+Step} (float px, float py, float pz)
\item 
\mbox{\Hypertarget{class_movement_controller_a820b51c9a23a4a363274bc28c5393295}\label{class_movement_controller_a820b51c9a23a4a363274bc28c5393295}} 
{\bfseries $\sim$\+Movement\+Controller} ()
\end{DoxyCompactItemize}
\end{Indent}
\subsection*{Public Attributes}
\textbf{ }\par
\begin{DoxyCompactItemize}
\item 
A\+X12A \mbox{\hyperlink{class_movement_controller_ac4642ac20e0affff60ff0b8c0e5efdbb}{m\+\_\+\+Servo\+Com\+Object1}}
\begin{DoxyCompactList}\small\item\em Three objects of the class A\+X12A are created. To enable parallel communication with three serial ports on the Arduino. \end{DoxyCompactList}\item 
A\+X12A \mbox{\hyperlink{class_movement_controller_abd74aff807ff311c6891311414ae3993}{m\+\_\+\+Servo\+Com\+Object2}}
\item 
A\+X12A \mbox{\hyperlink{class_movement_controller_afbe7c5a0e099b5e879d64b6ab72f7127}{m\+\_\+\+Servo\+Com\+Object3}}
\end{DoxyCompactItemize}

\textbf{ }\par
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_movement_controller_a13bd6406481979df9aa10857a38d3381}\label{class_movement_controller_a13bd6406481979df9aa10857a38d3381}} 
\mbox{\hyperlink{class_leg}{Leg}} \mbox{\hyperlink{class_movement_controller_a13bd6406481979df9aa10857a38d3381}{m\+\_\+\+Leg1}}
\begin{DoxyCompactList}\small\item\em Every leg on the hexapod can be individually controlled by following objects. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_movement_controller_a98baf7599b6b5c5a4dc852301dc19268}\label{class_movement_controller_a98baf7599b6b5c5a4dc852301dc19268}} 
\mbox{\hyperlink{class_leg}{Leg}} {\bfseries m\+\_\+\+Leg2}
\item 
\mbox{\Hypertarget{class_movement_controller_a0d4edfeb6b4c2ad57dd3b1e387bc4de9}\label{class_movement_controller_a0d4edfeb6b4c2ad57dd3b1e387bc4de9}} 
\mbox{\hyperlink{class_leg}{Leg}} {\bfseries m\+\_\+\+Leg3}
\item 
\mbox{\Hypertarget{class_movement_controller_a8f776e74969ff7983f6cc6909e1dec27}\label{class_movement_controller_a8f776e74969ff7983f6cc6909e1dec27}} 
\mbox{\hyperlink{class_leg}{Leg}} {\bfseries m\+\_\+\+Leg4}
\item 
\mbox{\Hypertarget{class_movement_controller_aa72587ce1fb41820aa9a8f3b94496e69}\label{class_movement_controller_aa72587ce1fb41820aa9a8f3b94496e69}} 
\mbox{\hyperlink{class_leg}{Leg}} {\bfseries m\+\_\+\+Leg5}
\item 
\mbox{\Hypertarget{class_movement_controller_a7844bc42dba768e27bb5eb86bea99ef6}\label{class_movement_controller_a7844bc42dba768e27bb5eb86bea99ef6}} 
\mbox{\hyperlink{class_leg}{Leg}} {\bfseries m\+\_\+\+Leg6}
\end{DoxyCompactItemize}



\subsection{Detailed Description}
Rough structure of the hexapod to understand the naming of the six legs. To find the \char`\"{}\+U\+P\char`\"{} position please look on the backside of the robot. 
\begin{DoxyPre}
\begin{DoxyVerb}leg1                  leg2
<===\     /"UP"\     /===>
     \==|--------|==/
        |--------|
leg3    |--------|  leg4
<=======|--------|=======>
        |--------|
        |--------|
leg5 /==|--------|==\leg6
<===/   |--------|   \===>
\end{DoxyVerb}

\end{DoxyPre}
 ~\newline
Rough structure of the hexapod to understand the naming of the three servos on one leg. \begin{DoxyVerb}         (LeftLeg)                      Hexapod                          (RightLeg) 
                            /////######################\\\\\        
       _____________     BodyServo                   BodyServo          _____________
       LowerLegServo      /////#########################\\\\\           LowerLegServo
     /////      \\\\\    /////                           \\\\\        /////      \\\\\
    /////        \\\\\  /////                             \\\\\      /////        \\\\\
   /////        MiddleLegServo                             MiddleLegServo          \\\\\
____\/__________________________________ Ground______________________________________\/______                                                            
\end{DoxyVerb}
 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_movement_controller_a53d19d2516a2ed440c2b15fc47ea91b7}\label{class_movement_controller_a53d19d2516a2ed440c2b15fc47ea91b7}} 
\index{Movement\+Controller@{Movement\+Controller}!get\+Angle\+With\+IK@{get\+Angle\+With\+IK}}
\index{get\+Angle\+With\+IK@{get\+Angle\+With\+IK}!Movement\+Controller@{Movement\+Controller}}
\subsubsection{\texorpdfstring{get\+Angle\+With\+I\+K()}{getAngleWithIK()}}
{\footnotesize\ttfamily unsigned char Movement\+Controller\+::get\+Angle\+With\+IK (\begin{DoxyParamCaption}\item[{float}]{px,  }\item[{float}]{py,  }\item[{float}]{pz,  }\item[{float \&}]{q1,  }\item[{float \&}]{q2,  }\item[{float \&}]{q3 }\end{DoxyParamCaption})}

get\+Angle\+With\+IK  calculates the angles q1 \mbox{[}rad/sec\mbox{]}, q2 \mbox{[}rad/sec\mbox{]} and q3 \mbox{[}rad/sec\mbox{]} for the desired movement in px \mbox{[}mm\mbox{]}, py \mbox{[}mm\mbox{]} and pz \mbox{[}mm\mbox{]} 
\begin{DoxyParams}{Parameters}
{\em px,py,py} & desired coordinates \\
\hline
{\em q1,q2,q3} & (return-\/by-\/reference) calculated angles for the desired movement \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
returns an error code, if problems occur. Else it returns 1 
\end{DoxyReturn}
\mbox{\Hypertarget{class_movement_controller_a5765726eb4e820a7ac669c88fe4937e7}\label{class_movement_controller_a5765726eb4e820a7ac669c88fe4937e7}} 
\index{Movement\+Controller@{Movement\+Controller}!get\+Angle\+With\+I\+K\+\_\+tan\+Formula@{get\+Angle\+With\+I\+K\+\_\+tan\+Formula}}
\index{get\+Angle\+With\+I\+K\+\_\+tan\+Formula@{get\+Angle\+With\+I\+K\+\_\+tan\+Formula}!Movement\+Controller@{Movement\+Controller}}
\subsubsection{\texorpdfstring{get\+Angle\+With\+I\+K\+\_\+tan\+Formula()}{getAngleWithIK\_tanFormula()}}
{\footnotesize\ttfamily unsigned char Movement\+Controller\+::get\+Angle\+With\+I\+K\+\_\+tan\+Formula (\begin{DoxyParamCaption}\item[{float}]{px,  }\item[{float}]{py,  }\item[{float}]{pz,  }\item[{float \&}]{q1,  }\item[{float \&}]{q2,  }\item[{float \&}]{q3 }\end{DoxyParamCaption})}

get\+Angle\+With\+I\+K\+\_\+tan\+Formula  calculates the angles q1 \mbox{[}rad/sec\mbox{]}, q2 \mbox{[}rad/sec\mbox{]} and q3 \mbox{[}rad/sec\mbox{]} for the desired movement in px \mbox{[}mm\mbox{]}, py \mbox{[}mm\mbox{]} and pz \mbox{[}mm\mbox{]} A error from this formula can be expected, due to the use of the tan-\/function. For better results, use the \textquotesingle{}get\+Angle\+With\+IK(...)\textquotesingle{} function. 
\begin{DoxyParams}{Parameters}
{\em px,py,py} & desired coordinates \\
\hline
{\em q1,q2,q3} & (return-\/by-\/reference) calculated angles for the desired movement\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
returns an error code, if problems occur. Else it returns 1 
\end{DoxyReturn}
\mbox{\Hypertarget{class_movement_controller_a0710b423644d46f7391e4b75c5879559}\label{class_movement_controller_a0710b423644d46f7391e4b75c5879559}} 
\index{Movement\+Controller@{Movement\+Controller}!get\+Leg\+Coordinates\+From\+World\+Coordinates@{get\+Leg\+Coordinates\+From\+World\+Coordinates}}
\index{get\+Leg\+Coordinates\+From\+World\+Coordinates@{get\+Leg\+Coordinates\+From\+World\+Coordinates}!Movement\+Controller@{Movement\+Controller}}
\subsubsection{\texorpdfstring{get\+Leg\+Coordinates\+From\+World\+Coordinates()}{getLegCoordinatesFromWorldCoordinates()}}
{\footnotesize\ttfamily unsigned char Movement\+Controller\+::get\+Leg\+Coordinates\+From\+World\+Coordinates (\begin{DoxyParamCaption}\item[{unsigned char}]{leg\+Number,  }\item[{float}]{pk\+Xold,  }\item[{float}]{pk\+Yold,  }\item[{float}]{pk\+Zold,  }\item[{float}]{pwX,  }\item[{float}]{pwY,  }\item[{float}]{pwZ,  }\item[{float \&}]{pkX,  }\item[{float \&}]{pkY,  }\item[{float \&}]{pkZ }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em leg\+Number} & The leg to that the coordinate system is transformed \\
\hline
{\em pk\+Xold,pk\+Yold,pk\+Zold} & Current position of the leg in the leg coordinate system \\
\hline
{\em pwX,pwY,pwZ} & New desired position. Given in the world coordinate system. \\
\hline
{\em pkX,pkY,pkZ} & (return-\/by-\/reference) New calculated position in specific leg coordinate system. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Returns} & an error code, if problems occur. Else it returns 1 \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{class_movement_controller_a53b401947106872656c4fb1e77b04bba}\label{class_movement_controller_a53b401947106872656c4fb1e77b04bba}} 
\index{Movement\+Controller@{Movement\+Controller}!interpolation\+Angle\+Endposition@{interpolation\+Angle\+Endposition}}
\index{interpolation\+Angle\+Endposition@{interpolation\+Angle\+Endposition}!Movement\+Controller@{Movement\+Controller}}
\subsubsection{\texorpdfstring{interpolation\+Angle\+Endposition()}{interpolationAngleEndposition()}}
{\footnotesize\ttfamily unsigned char Movement\+Controller\+::interpolation\+Angle\+Endposition (\begin{DoxyParamCaption}\item[{float}]{qend,  }\item[{float}]{qhome,  }\item[{float(\&)}]{interpolated\+Angle\+Movement\mbox{[}10\mbox{]},  }\item[{float \&}]{movement\+Speed }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em } & \\
\hline
\end{DoxyParams}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_movement_controller_ac4642ac20e0affff60ff0b8c0e5efdbb}\label{class_movement_controller_ac4642ac20e0affff60ff0b8c0e5efdbb}} 
\index{Movement\+Controller@{Movement\+Controller}!m\+\_\+\+Servo\+Com\+Object1@{m\+\_\+\+Servo\+Com\+Object1}}
\index{m\+\_\+\+Servo\+Com\+Object1@{m\+\_\+\+Servo\+Com\+Object1}!Movement\+Controller@{Movement\+Controller}}
\subsubsection{\texorpdfstring{m\+\_\+\+Servo\+Com\+Object1}{m\_ServoComObject1}}
{\footnotesize\ttfamily A\+X12A Movement\+Controller\+::m\+\_\+\+Servo\+Com\+Object1}



Three objects of the class A\+X12A are created. To enable parallel communication with three serial ports on the Arduino. 

Communication object \mbox{\Hypertarget{class_movement_controller_abd74aff807ff311c6891311414ae3993}\label{class_movement_controller_abd74aff807ff311c6891311414ae3993}} 
\index{Movement\+Controller@{Movement\+Controller}!m\+\_\+\+Servo\+Com\+Object2@{m\+\_\+\+Servo\+Com\+Object2}}
\index{m\+\_\+\+Servo\+Com\+Object2@{m\+\_\+\+Servo\+Com\+Object2}!Movement\+Controller@{Movement\+Controller}}
\subsubsection{\texorpdfstring{m\+\_\+\+Servo\+Com\+Object2}{m\_ServoComObject2}}
{\footnotesize\ttfamily A\+X12A Movement\+Controller\+::m\+\_\+\+Servo\+Com\+Object2}

Communication object \mbox{\Hypertarget{class_movement_controller_afbe7c5a0e099b5e879d64b6ab72f7127}\label{class_movement_controller_afbe7c5a0e099b5e879d64b6ab72f7127}} 
\index{Movement\+Controller@{Movement\+Controller}!m\+\_\+\+Servo\+Com\+Object3@{m\+\_\+\+Servo\+Com\+Object3}}
\index{m\+\_\+\+Servo\+Com\+Object3@{m\+\_\+\+Servo\+Com\+Object3}!Movement\+Controller@{Movement\+Controller}}
\subsubsection{\texorpdfstring{m\+\_\+\+Servo\+Com\+Object3}{m\_ServoComObject3}}
{\footnotesize\ttfamily A\+X12A Movement\+Controller\+::m\+\_\+\+Servo\+Com\+Object3}

Communication object 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_movement_controller_8h}{Movement\+Controller.\+h}}\item 
\mbox{\hyperlink{_movement_controller_8cpp}{Movement\+Controller.\+cpp}}\end{DoxyCompactItemize}
